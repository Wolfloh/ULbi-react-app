{"ast":null,"code":"import _regeneratorRuntime from\"D:/FRONT-END/my-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/FRONT-END/my-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/FRONT-END/my-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import PostService from'../API/PostService';import{BackAside}from'../components/UI/BackAside/BackAside';import{Comment}from'../components/UI/Comment/Comment';import{ComponentError}from'../components/UI/ComponentError/ComponentError';import{Loader}from'../components/UI/Loader/Loader';import{useFetching}from'../hooks/useFetching';import'../styles/App.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var PostPage=function PostPage(){var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];var _useFetching=useFetching(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return PostService.getOne(id);case 2:response=_context.sent;setPost(response.data);case 4:case\"end\":return _context.stop();}},_callee);}))),_useFetching2=_slicedToArray(_useFetching,3),getPost=_useFetching2[0],isLoading=_useFetching2[1],error=_useFetching2[2];var _useFetching3=useFetching(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return PostService.getComments(id);case 2:response=_context2.sent;setComments(response.data);case 4:case\"end\":return _context2.stop();}},_callee2);}))),_useFetching4=_slicedToArray(_useFetching3,3),getComments=_useFetching4[0],areCommentsLoading=_useFetching4[1],commentsError=_useFetching4[2];useEffect(function(){window.scrollTo(0,0);},[]);useEffect(function(){getPost();getComments();},[id]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BackAside,{}),error&&/*#__PURE__*/_jsx(ComponentError,{}),!error&&(isLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(\"div\",{className:\"post-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-shell\",children:[/*#__PURE__*/_jsxs(\"strong\",{className:\"post-title\",children:[post.id,\" \",post.title]}),/*#__PURE__*/_jsx(\"p\",{className:\"post-body\",children:post.body})]})})),!commentsError&&(areCommentsLoading?/*#__PURE__*/_jsx(Loader,{}):comments.length?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"post-comments\",children:\"\\u041A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438\"}),comments.map(function(comment,index){return/*#__PURE__*/_jsx(Comment,{comment:comment,index:index},comment.id);})]}):!error&&/*#__PURE__*/_jsx(\"h3\",{className:\"post-comments\",children:\"\\u041D\\u0435\\u0442 \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0435\\u0432\"})),commentsError&&/*#__PURE__*/_jsx(ComponentError,{})]});};","map":{"version":3,"names":["React","useState","useEffect","useParams","PostService","BackAside","Comment","ComponentError","Loader","useFetching","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PostPage","_useParams","id","_useState","_useState2","_slicedToArray","post","setPost","_useState3","_useState4","comments","setComments","_useFetching","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","getOne","sent","data","stop","_useFetching2","getPost","isLoading","error","_useFetching3","_callee2","_callee2$","_context2","getComments","_useFetching4","areCommentsLoading","commentsError","window","scrollTo","children","className","title","body","length","map","comment","index"],"sources":["D:/FRONT-END/my-react/src/pages/PostPage.jsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport PostService from '../API/PostService'\r\nimport { BackAside } from '../components/UI/BackAside/BackAside'\r\nimport { Comment } from '../components/UI/Comment/Comment'\r\nimport { ComponentError } from '../components/UI/ComponentError/ComponentError'\r\nimport { Loader } from '../components/UI/Loader/Loader'\r\nimport { useFetching } from '../hooks/useFetching'\r\nimport '../styles/App.scss'\r\n\r\n\r\n\r\n\r\nexport const PostPage = () => {\r\n  const { id } = useParams();\r\n  const [post, setPost] = useState({});\r\n  const [comments, setComments] = useState([]);\r\n  const [getPost, isLoading, error] = useFetching(async () => {\r\n    const response = await PostService.getOne(id);\r\n    setPost(response.data)\r\n  })\r\n  const [getComments, areCommentsLoading, commentsError] = useFetching(async () => {\r\n    const response = await PostService.getComments(id);\r\n    setComments(response.data)\r\n  })\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n\r\n  useEffect(() => {\r\n    getPost()\r\n    getComments()\r\n  }, [id])\r\n\r\n\r\n  return (\r\n    <>\r\n      <BackAside />\r\n      {error\r\n        &&\r\n        <ComponentError />\r\n      }\r\n      {!error\r\n        &&\r\n        (isLoading\r\n          ?\r\n          <Loader />\r\n          :\r\n          <div className='post-wrapper'>\r\n            <div className='post-shell'>\r\n              <strong className='post-title'>{post.id} {post.title}</strong>\r\n              <p className='post-body'>{post.body}</p>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      {!commentsError\r\n        &&\r\n        (areCommentsLoading\r\n          ?\r\n          <Loader />\r\n          :\r\n          (comments.length\r\n            ?\r\n            <>\r\n              <h2 className='post-comments'>\r\n                Коментарии\r\n              </h2>\r\n              {comments.map((comment, index) =>\r\n                <Comment key={comment.id} comment={comment} index={index} />)}\r\n            </>\r\n            :\r\n            (!error\r\n              &&\r\n              <h3 className='post-comments'>\r\n                Нет комментариев\r\n              </h3>\r\n            )\r\n          )\r\n        )\r\n      }\r\n      {commentsError\r\n        &&\r\n        <ComponentError />\r\n      }\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}